{
  "version": "6.2",
  "data_api_version": "3.0",
  "routing_model": {
    "ESPECIALIDADE": ["INFO_CONVENIO"],
    "INFO_CONVENIO": []
  },
  "screens": [
    {
      "id": "ESPECIALIDADE",
      "title": "Agendar Consulta",
      "data": {
        "especialidades": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "title": { "type": "string" },
              "description": { "type": "string" }
            }
          },
          "__example__": [
            { "id": "prof_1", "title": "Cardiologia", "description": "Dr. Joao Silva" },
            { "id": "prof_2", "title": "Dermatologia", "description": "Dra. Maria Santos" }
          ]
        },
        "error_message": {
          "type": "string",
          "__example__": ""
        }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "form_especialidade",
            "children": [
              {
                "type": "RadioButtonsGroup",
                "name": "especialidade",
                "label": "Profissional",
                "required": true,
                "data-source": "${data.especialidades}"
              },
              {
                "type": "Footer",
                "label": "Continuar",
                "on-click-action": {
                  "name": "data_exchange",
                  "payload": { "especialidade": "${form.especialidade}" }
                }
              }
            ]
          }
        ]
      }
    },
    {
      "id": "INFO_CONVENIO",
      "title": "Dados do Convenio",
      "terminal": true,
      "data": {
        "especialidade": { "type": "string", "__example__": "prof_1" },
        "professional_id": { "type": "string", "__example__": "prof_1" },
        "professional_name": { "type": "string", "__example__": "Dr. Joao Silva" },
        "specialty_name": { "type": "string", "__example__": "Cardiologia" },
        "convenios": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": { "type": "string" },
              "title": { "type": "string" }
            }
          },
          "__example__": [
            { "id": "unimed", "title": "Unimed" },
            { "id": "bradesco", "title": "Bradesco Saude" }
          ]
        },
        "error_message": { "type": "string", "__example__": "" }
      },
      "layout": {
        "type": "SingleColumnLayout",
        "children": [
          {
            "type": "Form",
            "name": "form_convenio",
            "children": [
              {
                "type": "Dropdown",
                "name": "convenio_nome",
                "label": "SEU CONVENIO",
                "required": true,
                "data-source": "${data.convenios}"
              },
              {
                "type": "Footer",
                "label": "Continuar",
                "on-click-action": {
                  "name": "complete",
                  "payload": {
                    "especialidade": "${data.especialidade}",
                    "professional_id": "${data.professional_id}",
                    "professional_name": "${data.professional_name}",
                    "specialty_name": "${data.specialty_name}",
                    "tipo_pagamento": "convenio",
                    "convenio_nome": "${form.convenio_nome}"
                  }
                }
              }
            ]
          }
        ]
      }
    }
  ]
}
