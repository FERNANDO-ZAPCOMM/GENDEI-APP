# WhatsApp Agent Service - Environment Variables (Gendei OpenAI)

# OpenAI Configuration
OPENAI_API_KEY=

# Google Cloud (will be set by deploy.sh)
GOOGLE_CLOUD_PROJECT=gendei-prod

# Application Domain
DOMAIN=https://gendei-whatsapp-agent-647402645066.us-central1.run.app

# Multi-tenant Configuration
# TEST_CREATOR_ID - leave empty for production multi-clinic mode
# Set only for testing with a specific clinic
TEST_CREATOR_ID=
DEFAULT_CREATOR_ID=default_creator

# Payment - PagSeguro PIX
# Uses the same PagSeguro account as Zapcomm
PAGSEGURO_TOKEN=
PAGSEGURO_EMAIL=
PAGSEGURO_ENVIRONMENT=production

# Optional
DEFAULT_BRAZILIAN_PHONE=+5511999999999
LOG_LEVEL=INFO

# WhatsApp API
META_API_VERSION=v24.0
META_BISU_ACCESS_TOKEN=
META_WEBHOOK_VERIFY_TOKEN=gendei_verify_token

# WhatsApp Flows (Optional)
# Create flows in Meta Business Manager and set the flow IDs here
# to enable the enhanced scheduling experience
# Flow 1: Patient Info (ESPECIALIDADE → TIPO_ATENDIMENTO → INFO_CONVENIO → DADOS_PACIENTE)
# Flow 2: Booking (BOOKING - date picker + time dropdown)

# WhatsApp Flows Encryption (Required for data_exchange flows)
# Generate keys with:
#   openssl genrsa -out flows_private_key.pem 2048
#   openssl rsa -in flows_private_key.pem -pubout -out flows_public_key.pem
# Store as single line with \n for newlines
FLOWS_PRIVATE_KEY=

# Webhook/Internal Security
META_APP_SECRET=
GENDEI_SERVICE_SECRET=
FLOW_TOKEN_SECRET=
ALLOW_UNENCRYPTED_FLOWS=false
ALLOW_LEGACY_FLOW_TOKENS=false

# OpenAI session backend (production-ready defaults)
# OPENAI_SESSION_BACKEND=sqlalchemy|redis|sqlite|custom
OPENAI_SESSION_BACKEND=sqlalchemy
OPENAI_SESSION_DATABASE_URL=
OPENAI_SESSION_REDIS_URL=
OPENAI_SESSION_HYDRATE_FROM_FIRESTORE=true
OPENAI_SESSION_BACKEND_FALLBACK_TO_SQLITE=false
